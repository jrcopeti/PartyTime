<div class="container">
  <h1>Profile</h1>

  <% if current_user.photo.attached? %>
      <%= cl_image_tag current_user.photo.key, width: 50, height: 50, radius:"max", crop: "thumb"%>
  <% else %>
      <%= image_tag(current_user.avatar_url)%>
  <%end %>


  <h2> <%= @user.nickname %></h2>
  <h4> <%= @user.full_name %></h4>
  <p><%= @user.bio %></p>

  <h2>My favorites events</h2>
    <% current_user.favorited_by_type("Event").each do |favorite| %>
      <ul>
      <li><%=link_to favorite.title, venue_event_path(favorite.venue_id, favorite.id)  %></li>
      </ul>
  <% end %>

  <h2>My favorites venues</h2>
    <%current_user.favorited_by_type("Venue").each do |favorite|%>
      <ul>
        <li><%=link_to favorite.name, venue_path(favorite.id)%></li>
      </ul>
     <% end %>

      <h2>My favorites artists</h2>
    <%current_user.favorited_by_type("Artist").each do |favorite|%>
      <ul>
        <li><%=link_to favorite.name, artist_path(favorite.id)%></li>
      </ul>
     <% end %>

  <h2>My upcoming Events</h2>
    <ul>
    <% @user.rsvps.future.each do |rsvp| %>
    <li><%= link_to rsvp.event.title, venue_event_path(rsvp.event.venue_id, rsvp.event.id) %></li>
    </ul>
  <% end %>

   <h2>My past Events</h2>
    <ul>
    <% @user.rsvps.past.each do |rsvp| %>
    <li><%= link_to rsvp.event.title, venue_event_path(rsvp.event.venue_id, rsvp.event.id) %></li>
    </ul>
  <% end %>


  <%= link_to "Edit Profile", edit_user_path(current_user) %>
  <%= link_to "Log out", destroy_user_session_path, data: {turbo_method: :delete} %>



</div>
